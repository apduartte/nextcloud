############################################
# Identificação do projeto
############################################

# Nome base do projeto (vai como prefixo nos recursos)
project_name = "nextcloud-lab-exemplo"

############################################
# Região da AWS
############################################

# Região principal em que os recursos serão criados
region = "us-east-1"

############################################
# VPC e sub-redes
############################################

# CIDR da VPC e subnets públicas/privadas
vpc_cidr      = "10.10.0.0/16"
azs           = ["us-east-1a", "us-east-1b"]
public_cidrs  = ["10.10.0.0/24", "10.10.1.0/24"]
private_cidrs = ["10.10.10.0/24", "10.10.11.0/24"]

############################################
# EC2 / Auto Scaling (Nextcloud)
############################################

# t3.small = mais confortável | t3.micro = mais barato
instance_type = "t3.small"

# Nome exato da Key Pair já criada na região.
# Deixe vazio ("") se NÃO for usar SSH (apenas SSM).
key_name = "SUA_KEYPAIR_AQUI"

############################################
# Banco de Dados RDS PostgreSQL
############################################

db_username          = "nextcloud"
# ⚠ IMPORTANTE:
# NÃO defina db_password neste arquivo de exemplo.
# Use variável de ambiente (recomendado):
#   export TF_VAR_db_password="SuaSenhaForteAqui"
db_name              = "nextcloud"
db_allocated_storage = 20
db_instance_class    = "db.t3.micro"

############################################
# Domínio confiável do Nextcloud
############################################

# Em laboratório: pode ser o DNS do ALB.
# Em produção: use o seu domínio (ex.: "nextcloud.seu-dominio.com.br").
trusted_domains = "nextcloud.seu-dominio.com.br"

############################################
# HTTPS no ALB / ACM
############################################

# false  = apenas HTTP (80)
# true   = cria listener HTTPS (443) + redirect 80 → 443
enable_https = false

# Se você JÁ tiver um certificado ACM na mesma região do ALB,
# coloque o ARN aqui. Caso contrário, deixe vazio ("").
acm_certificate_arn = ""

############################################
# CloudFront / Domínio público (opcional)
############################################

# Domínio público no Route 53 (quando usar CloudFront + WAF).
domain_name    = "nextcloud.seu-dominio.com.br"
hosted_zone_id = "ZXXXXXXXXXXXX" # Substitua pelo ID real da hosted zone

# false = acessa direto o ALB
# true  = cria CloudFront + WAF + ACM (us-east-1)
enable_cloudfront = false

############################################
# Proteção contra destruição acidental
############################################

# Semântica:
# - false -> proteção LIGADA (não destrói fácil)
# - true  -> proteção DESLIGADA (libera terraform destroy)
enable_destroy = false
